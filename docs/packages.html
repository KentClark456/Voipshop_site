<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Meta -->
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>VoIP Shop - Packages</title>
  <meta name="description" content="Buy PBX phones at cost price with professional installation. No contracts, no markups. Simple monthly service from R 85/month." />

  <!-- Favicon -->
  <link rel="icon" type="image/png" href="Assets/icon _voice_.png" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@100;300;400;500;700;900&display=swap" rel="stylesheet" />

  <!-- Styles (with preload + noscript fallback) -->
  <link rel="preload" as="style" href="style.css" onload="this.onload=null;this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="style.css" /></noscript>

  <!-- Google Tag Manager -->
  <script>
    (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TKKDK54F');
  </script>
  <!-- Tailwind (with safelist for injected header) -->
  <script>
    window.tailwind = window.tailwind || {};
    window.tailwind.config = {
      safelist: [
        'hidden','block','md:hidden','md:flex','overflow-hidden',
        'sticky','top-0','z-50','backdrop-blur',
        'border-b','border-gray-200',
        'max-w-screen-xl','mx-auto','px-4','md:px-6','py-3',
        'flex','items-center','justify-between','gap-6',
        'text-sm','font-medium','text-gray-700','hover:text-black',
        'space-y-2','text-base'
      ]
    };
  </script>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Flowbite (unchanged) -->
  <link href="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.css" rel="stylesheet" />
  <script src="https://unpkg.com/flowbite@1.6.5/dist/flowbite.min.js" defer></script>

  <!-- Page CSS (no inline JS) -->
  <style>
    :root{ --navH: 72px; }

    /* ---------- SYSTEM / PAGE GUARDS ---------- */
    html{
      scroll-behavior: smooth;
      overscroll-behavior: none;
      background:#f3f4f6;
    }
    html, body{
      min-height:100%;
      overflow-y:auto;
      overflow-x:clip;
    }
    @supports not (overflow-x: clip){
      html, body{ overflow-x:hidden; }
    }
    body{
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior: none;
      color:#111827;
      background:#f3f4f6;
      font-family: Roboto, system-ui, -apple-system, Segoe UI, Arial, sans-serif;
    }
    section[id]{ scroll-margin-top: max(56px, var(--navH)); }

    /* ---------- NAVBAR FULL-WIDTH & STABLE ---------- */
    #nav-slot.nav-reserve{ min-height: var(--navH); }
    #nav-slot, #nav-slot>*{
      width:100%;
      max-width:none !important;
      margin:0 !important;
      overflow:visible;
      box-sizing:border-box;
    }
    #nav-slot *{ box-sizing:border-box; }
    #nav-slot .max-w-screen-xl{ max-width:100% !important; }
    #nav-slot .mx-auto{ margin-left:0 !important; margin-right:0 !important; }
    @media (max-width:640px){
      #nav-slot > *{ padding-inline:16px; }
    }

    /* Layout */
    .flow-layout{ display:block; }
    .package-container-outer{ max-width:none; width:100%; padding-inline: clamp(12px, 3vw, 32px); }

    /* Section titles */
    .hardware-section-title{
      display:grid; grid-template-columns:auto; row-gap:6px;
      margin:22px 0 12px; padding:0 2px; color:#111827;
    }
    .hardware-section-title .kicker{
      font-size:.92rem; line-height:1.15; font-weight:800;
      letter-spacing:.12em; text-transform:uppercase; color:#111827;
      display:inline-flex; align-items:center; gap:10px;
    }
    .hardware-section-title .kicker::after{
      content:""; display:inline-block; height:2px;
      width:clamp(40px, 12vw, 120px); background:#111827; border-radius:2px; translate:0 1px;
    }
    .hardware-section-title .subtitle{ color:#6b7280; font-weight:500; font-size:.95rem; }

    .hardware-divider{ border:0; border-top:1px solid #9ca3af; margin:24px 0 12px; }

    /* Responsive grid */
    .hardware-container{
      display:grid; gap:clamp(12px, 2vw, 20px);
      grid-template-columns:1fr; align-items:stretch; grid-auto-rows:1fr;
    }
    @media (min-width:700px){ .hardware-container{ grid-template-columns: repeat(2, minmax(0,1fr)); } }
    @media (min-width:1024px){ .hardware-container{ grid-template-columns: repeat(3, minmax(0,1fr)); } }

    /* Card shell */
    .hardware-container > *{
      border-radius:16px; min-height:360px;
      padding:clamp(12px, 2.2vw, 20px); background:#fff;
      border:1px solid #e5e7eb; box-shadow:0 1px 2px rgba(0,0,0,.03);
    }

    /* Performance: paint groups lazily (first one forced visible for safety) */
    .package-group{ content-visibility:auto; contain-intrinsic-size: 600px 1000px; }
    .package-group:first-of-type{ content-visibility:visible; contain-intrinsic-size:auto; }

    /* Intro */
    #packages-intro h1{
      font-size: clamp(1.9rem, 6.5vw, 2.5rem);
      line-height:1.15; font-weight:600;
    }
    #packages-intro .border-t{ display:none !important; }

    /* Left-center slider */
    #section-slider{
      position:fixed; left:clamp(8px, 1.2vw, 16px); top:50%; transform:translateY(-50%);
      z-index:60; display:none; will-change:transform;
    }
    @media (min-width:1024px){ #section-slider{ display:flex; } }
    #section-slider * { color:#111; }
    #section-slider .slider-shell{
      display:flex; flex-direction:column; align-items:center; gap:8px;
      background:rgba(235,235,237,0.95);
      border:1px solid rgba(0,0,0,0.16);
      backdrop-filter: blur(12px) saturate(180%);
      border-radius:16px; padding:10px; box-shadow:0 8px 22px rgba(0,0,0,.12);
    }
    #section-slider .arrow{
      width:44px; height:44px; display:grid; place-items:center;
      border-radius:12px; border:1px solid rgba(0,0,0,0.14);
      background:#fff; font-weight:700; line-height:1;
    }
    #section-slider .arrow[disabled]{ opacity:.4; }

    #section-slider .links{
      display:flex; flex-direction:column; gap:6px; align-items:stretch;
      max-height: min(60vh, 520px); overflow:auto; -webkit-overflow-scrolling:touch;
    }
    #section-slider .link{
      display:flex; align-items:center; gap:10px;
      border:1px solid rgba(0,0,0,0.12); background:#fff;
      padding:12px; border-radius:12px; text-decoration:none;
      font:600 13px/1.2 system-ui; white-space:nowrap; min-width:160px; color:#111;
      transition: background .2s, border-color .2s;
    }
    #section-slider .link:hover{ background:#f0f0f0; }
    #section-slider .link[aria-current="true"]{
      border-color:#0071E3; background:#f0f7ff; color:#0071E3;
    }
    #section-slider .icon{ width:18px; height:18px; color:inherit; }

    /* Step-2 visual (applied by JS via .checkout-ring) */
    #package-summary h2{
      font-family:-apple-system,BlinkMacSystemFont,"SF Pro Display","SF Pro Text",system-ui,Segoe UI,Roboto,Arial,sans-serif;
      font-weight:500; letter-spacing:-0.01em;
    }
    #package-summary .rounded-2xl.checkout-ring{
      border-color:#0A84FF !important;
      box-shadow:0 0 0 3px rgba(10,132,255,.22), 0 12px 32px rgba(0,0,0,.06);
      transition: box-shadow .2s ease, border-color .2s ease;
    }

    /* Mobile slider off */
    @media (max-width:1023.98px){ #section-slider{ display:none !important; } }
  </style>
</head>

<body class="bg-gray-100 text-black packages-page">
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TKKDK54F" height="0" width="0" style="display:none;visibility:hidden"></iframe>
  </noscript>

  <!-- ✅ Universal navbar (injected by site.js) -->
  <div id="nav-slot" class="nav-reserve"></div>
  <script src="./scripts/site.js" defer></script>

  <!-- ===== Left-center slider (behavior handled in scripts/packages.js) ===== -->
  <nav id="section-slider" aria-label="Quick sections" data-slider>
    <div class="slider-shell">
      <button class="arrow" id="slide-up" aria-label="Previous section" data-slider-prev>▲</button>
      <div class="links" id="slider-links">
        <a class="link" href="#solo-setup" data-section-link>
          <svg class="icon"><use href="#icon-1pbx"/></svg><span>Team of 1</span>
        </a>
        <a class="link" href="#team-2" data-section-link>
          <svg class="icon"><use href="#icon-2pbx"/></svg><span>Team of 2</span>
        </a>
        <a class="link" href="#team-3" data-section-link>
          <svg class="icon"><use href="#icon-3pbx"/></svg><span>Team of 3</span>
        </a>
        <a class="link" href="#wireless-setups" data-section-link>
          <svg class="icon"><use href="#icon-wireless"/></svg><span>Wireless</span>
        </a>
        <a class="link" href="#package-summary" data-section-link>
          <svg class="icon"><use href="#icon-porting"/></svg><span>Step 2</span>
        </a>
      </div>
      <button class="arrow" id="slide-down" aria-label="Next section" data-slider-next>▼</button>
    </div>
  </nav>

  <main>
    <div class="flow-layout">
      <div class="content">

        <!-- Intro -->
        <section id="packages-intro" class="bg-gray-100">
          <div class="max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 pt-8 pb-6 text-center">
            <div class="inline-flex items-center gap-2 rounded-full bg-gradient-to-r from-[#0A84FF] to-[#0071E3] px-3 py-1 text-[10px] font-medium uppercase tracking-[0.18em] text-white shadow-sm ring-1 ring-white/20">
              <span class="inline-block h-1.5 w-1.5 rounded-full bg-white/95"></span>
              Step 1
            </div>

            <h1 class="mt-3 text-[30px] sm:text-[36px] leading-tight font-semibold tracking-tight text-gray-900">
              Choose your package
            </h1>

            <p class="mt-2 text-[13px] text-gray-500">
              35c/min local · 55c/min mobile · International varies
            </p>

            <div class="mt-6 border-t border-gray-200/60"></div>
          </div>
        </section>

        <!-- Team of 1 -->
        <section id="solo-setup" class="package-group">
          <div class="package-container-outer">
            <h2 class="hardware-section-title">
              <span class="kicker">Team of 1</span>
              <span class="subtitle">1 phone — 1 concurrent call</span>
            </h2>

            <!-- FIXED: plural id to match renderer -->
            <div id="row-1-extensions" class="hardware-container" data-packages-row="1"></div>
            <hr class="hardware-divider" />
          </div>
        </section>

        <!-- Team of 2 -->
        <section id="team-2" class="package-group">
          <div class="package-container-outer">
            <h2 class="hardware-section-title">
              <span class="kicker">Team of 2</span>
              <span class="subtitle">2 phones — 2 concurrent calls</span>
            </h2>

            <div id="row-2-extensions" class="hardware-container" data-packages-row="2"></div>
            <hr class="hardware-divider" />
          </div>
        </section>

        <!-- Team of 3 -->
        <section id="team-3" class="package-group">
          <div class="package-container-outer">
            <h2 class="hardware-section-title">
              <span class="kicker">Team of 3</span>
              <span class="subtitle">3 phones — 3 concurrent calls</span>
            </h2>

            <div id="row-3-extensions" class="hardware-container" data-packages-row="3"></div>
            <hr class="hardware-divider" />
          </div>
        </section>

        <!-- Wireless Setups -->
        <section id="wireless-setups" class="package-group">
          <div class="package-container-outer">
            <h2 class="hardware-section-title">
              <span class="kicker">Wireless Setups</span>
              <span class="subtitle">Plug-and-play wireless devices — just add Wi-Fi</span>
            </h2>

            <div id="wireless-cards" class="hardware-container" data-packages-row="wireless"></div>
            <hr class="hardware-divider" />
          </div>
        </section>

        <!-- Package Summary (Step 2) -->
        <section id="package-summary" class="w-full bg-gray-100 py-12 sm:py-16 px-4 sm:px-6 lg:px-8">
          <div class="max-w-3xl mx-auto">
            <div id="summary-card" class="rounded-2xl border border-gray-200 bg-white shadow-sm p-6 sm:p-8 md:p-10 text-center" data-summary-card>
              <p class="text-xs font-medium uppercase tracking-widest text-gray-500">Next Step</p>
              <h2 class="mt-2 text-2xl font-semibold tracking-tight text-gray-900">Proceed to Porting</h2>

              <div class="mt-4 flex flex-wrap items-center justify-center gap-3">
                <div class="inline-flex items-center rounded-full bg-black px-4 py-2 text-sm font-medium text-white">Installation Included</div>
                <div class="inline-flex items-center rounded-full bg-black px-4 py-2 text-sm font-medium text-white">Support Included</div>
                <div class="inline-flex items-center rounded-full bg-black px-4 py-2 text-sm font-medium text-white">Minutes included</div>
              </div>

              <div class="mt-6 flex flex-wrap items-center justify-center gap-3">
                <div class="inline-flex items-baseline gap-2 rounded-full border border-gray-200 bg-gray-50 px-4 py-2">
                  <span class="text-[11px] uppercase tracking-widest text-gray-500">Monthly</span>
                  <span id="total-footer-price" class="text-xl font-semibold text-gray-900" data-total-monthly>R 0</span>
                  <span id="total-cost-period" class="text-gray-500">/mo.</span>
                </div>
                <div class="inline-flex items-baseline gap-2 rounded-full border border-gray-200 bg-gray-50 px-4 py-2">
                  <span class="text-[11px] uppercase tracking-widest text-gray-500">Once-off</span>
                  <span id="total-onceoff" class="text-xl font-semibold text-gray-900" data-total-onceoff>R 0</span>
                  <span class="text-gray-500">once-off</span>
                </div>
              </div>

              <div class="mt-8 flex flex-wrap items-center justify-center gap-3">
                <a href="porting.html"
                  class="min-w-[180px] inline-flex justify-center items-center gap-3 rounded-xl bg-[#0071E3] px-6 py-3 text-white font-semibold tracking-tight shadow-sm transition-colors duration-200 hover:bg-[#0066CC] focus:outline-none focus:ring-2 focus:ring-[#0071E3]/30">
                  <span class="inline-flex items-center gap-2">Porting</span>
                  <svg class="h-5 w-5" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                    <path d="M6 12h12M12 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                  </svg>
                </a>
              </div>

              <p class="mt-3 text-xs text-gray-500">bring your numbers or get new ones</p>
            </div>
          </div>
        </section>

      </div>
    </div>
  </main>

  <!-- External scripts (no inline logic here) -->
  <script src="scripts/common.js" defer></script>
  <script src="scripts/index.js" defer></script>
  <script src="scripts/packages.js" defer></script>

  <!-- SVG Icon sprite (used by slider) -->
  <svg aria-hidden="true" style="position:absolute;width:0;height:0;overflow:hidden">
    <defs>
      <symbol id="icon-1pbx" viewBox="0 0 24 24">
        <g stroke="currentColor" fill="none" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
          <rect x="7" y="5" width="10" height="14" rx="2.5" ry="2.5"/>
          <circle cx="12" cy="15.5" r="1"/>
          <line x1="9" y1="8" x2="15" y2="8"/>
          <line x1="9" y1="11" x2="15" y2="11"/>
        </g>
      </symbol>
      <symbol id="icon-2pbx" viewBox="0 0 24 24">
        <g stroke="currentColor" fill="none" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
          <rect x="2.5" y="5" width="7" height="14" rx="2" ry="2"/>
          <circle cx="6" cy="15" r="0.9"/>
          <rect x="14.5" y="5" width="7" height="14" rx="2" ry="2"/>
          <circle cx="18" cy="15" r="0.9"/>
        </g>
      </symbol>
      <symbol id="icon-3pbx" viewBox="0 0 24 24">
        <g stroke="currentColor" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
          <rect x="1.5" y="6" width="5.5" height="12" rx="1.8" ry="1.8"/>
          <rect x="9.25" y="4.5" width="5.5" height="15" rx="1.8" ry="1.8"/>
          <rect x="17" y="6" width="5.5" height="12" rx="1.8" ry="1.8"/>
        </g>
      </symbol>
      <symbol id="icon-wireless" viewBox="0 0 24 24">
        <g stroke="currentColor" fill="none" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3.5 9.5c5.7-5.7 11.3-5.7 17 0" />
          <path d="M6.5 12.5c3.7-3.7 7.3-3.7 11 0" />
          <path d="M9.5 15.5c1.7-1.7 3.3-1.7 5 0" />
          <circle cx="12" cy="18.5" r="1.2" fill="currentColor" stroke="none"/>
        </g>
      </symbol>
      <symbol id="icon-porting" viewBox="0 0 24 24">
        <g stroke="currentColor" fill="none" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round">
          <path d="M5 8h9.5l-2-2m2 2l-2 2"/>
          <path d="M19 16H9.5l2-2m-2 2l2 2"/>
          <circle cx="12" cy="12" r="9" />
        </g>
      </symbol>
    </defs>
  </svg>
  <!-- WhatsApp floater (kept) -->
<a href="https://wa.me/27679228256?text=Hi%20VoIP%20Shop%2C%20I%20need%20help" target="_blank" rel="noopener"
   aria-label="Chat to VoIP Shop on WhatsApp"
   style="position:fixed;z-index:60;right:16px;bottom:16px;background:#25D366;color:#fff;
          border-radius:999px;padding:8px 12px;display:flex;gap:8px;align-items:center;
          box-shadow:0 10px 24px rgba(0,0,0,.16)">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18"
       fill="currentColor" aria-hidden="true">
    <path d="M20.52 3.48A11.91 11.91 0 0 0 12 0C5.37 0 0 5.37 0 12c0 2.12.55 4.16 1.59 5.97L0 24
             l6.2-1.58A11.94 11.94 0 0 0 12 24c6.63 0 12-5.37 12-12
             0-3.19-1.24-6.2-3.48-8.52zM12 21.5c-1.9 0-3.73-.5-5.34-1.45l-.38-.22-3.68.94.98-3.59
             -.25-.37A9.46 9.46 0 0 1 2.5 12C2.5 6.76 6.76 2.5 12 2.5c2.52 0 4.9.98
             6.71 2.79A9.45 9.45 0 0 1 21.5 12c0 5.24-4.26 9.5-9.5 9.5zm5.37-7.13
             c-.3-.15-1.77-.87-2.05-.97-.27-.1-.47-.15-.67.15s-.77.97-.94
             1.17c-.17.2-.35.22-.65.07-.3-.15-1.26-.46-2.4-1.46-.89-.79-1.5-1.77-1.67-2.07
             -.17-.3-.02-.46.13-.61.13-.13.3-.35.45-.52.15-.17.2-.3.3-.5.1-.2.05-.37
             -.02-.52-.07-.15-.67-1.62-.91-2.21-.24-.59-.48-.5-.67-.51h-.57
             c-.2 0-.52 .07-.79 .37s-1.04 1.02-1.04 2.5
             1.07 2.9 1.22 3.1c.15 .2 2.1 3.2 5.1 4.5 .71 .3 1.27 .48 1.7
             .62 .71 .23 1.35 .2 1.86 .12 .57 -.08 1.77 -.72
             2.02 -1.42 .25 -.7 .25 -1.3 .17 -1.42 -.08 -.12 -.27 -.2 -.57 -.35z"/>
  </svg>
  <span style="font-size:14px;font-weight:600">Need help?</span>
</a>
</body>
</html>
